<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.3.xsd">

  <action-attrs name="action-sale-order-line-attrs-domain-product"
    id="hr-action-sale-order-line-attrs-domain-product">
    <attribute name="domain" for="product"
      expr="self.isModel = false and self.expense = false and (self.endDate = null or self.endDate &gt; :__date__) and self.sellable = true and self.dtype = 'Product'"/>
    <attribute name="domain" for="product"
      expr="eval: &quot;self.isModel = false and (self.endDate = null or self.endDate &gt; :__date__) and self.dtype = 'Product' and (SELECT sellable FROM ProductCompany productCompany WHERE productCompany.product.id = self.id AND productCompany.company.id = ${__parent__ ? __parent__.company.id : saleOrder.company.id}) IS TRUE&quot;"
      if="__config__.app.getApp('base')?.getCompanySpecificProductFieldsList()?.find({it.name == 'sellable'})"/>
  </action-attrs>
</object-views>